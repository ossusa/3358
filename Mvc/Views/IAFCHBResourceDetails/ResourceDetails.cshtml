@model SitefinityWebApp.Mvc.Models.IAFCHandBookResourceModel
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

<div><a href="@Model.ResourceDetails.Category.ParentCategoryUrl"><span>@Model.ResourceDetails.Category.ParentCategoryTitle</span></a> > <a href="@Model.ResourceDetails.Category.CategoryUrl"><span>@Model.ResourceDetails.Category.CategoryTitle</span></a> > @Model.ResourceTitle </div>
<table>
	<tr>
		<td style="width:70%">
			<table>
				<tr>
					<td>
						@if (Model.ResourceDetails.VideoEmbedCode != null && Model.ResourceDetails.VideoEmbedCode != String.Empty)
						{
							<iframe width="420" height="315"
									src=@Model.ResourceDetails.VideoEmbedCode></iframe>
						}
					</td>
				</tr>
			</table>
		</td>
		<td style="width:30%">
			<table>
				<tr>
					<td>
						More Resources in <span>@Model.ResourceDetails.Category.CategoryTitle</span>
					</td>
				</tr>
				@foreach (var item in Model.MoreResources)
				{
					<tr>
						<td>
							@item.ResourceDetails.ResourceType
						</td>
					</tr>
					<tr>
						<td>
							<a href='@item.ResourceUrl'>@item.ResourceDetails.ResourceTitle</a>
						</td>
					</tr>
					<tr>
						<td>
							<button type="button" class="addLike" data-id="@item.Id.ToString()"> Add Like </button>
							<div id="@string.Format("{0}_{1}", "moreResourceLikes" , item.Id.ToString())">
								<span>@item.Likes.Likes</span>
							</div>
						</td>
						<td>
							<button type="button" class="addDislike" data-id="@item.Id.ToString()"> Add Dislike </button>
							<div id="@string.Format("{0}_{1}", "moreResourceDislikes" , item.Id.ToString())">
								<span>@item.Likes.Dislikes</span>
							</div>
						</td>
					</tr>

				}
				<tr>
					<td>
						<a href='@Model.ResourceDetails.Category.CategoryUrl'>See More</a>
					</td>
				</tr>
			</table>
		</td>
	</tr>
</table>


<script type="text/javascript">

	$(document).ready(function () {

		//Add Like
		$('.addLike').on('click', function () {

			var resourceId = $(this).attr('data-id');

			$.ajax({
				type: 'POST',
				url: '@Url.Action("AddLike", "IAFCHBResourceDetailsController")',
				data: { resourceId: resourceId },
				dataType: "json",
				success: function (response) {
					$("#moreResourceLikes_" + resourceId).html(response);
				}
			});
		});

		//Add Dislike
		$('.addDislike').on('click', function () {

			var resourceId = $(this).attr('data-id');

			$.ajax({
				type: 'POST',
				url: '@Url.Action("AddDislike", "IAFCHBResourceDetailsController")',
				data: { resourceId: resourceId },
				dataType: "json",
				success: function (response) {
					$("#moreResourceDislikes_" + resourceId).html(response);
				}
			});
		});
		
	});


</script>
