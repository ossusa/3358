@model  List<SitefinityWebApp.Mvc.Models.IAFCHandBookResourceModel>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<div class="community__section">
<div class="box">
		@{int columnCounter = 0; }

		@foreach (var item in Model)
		{
			if (columnCounter == 0)
			{
				@Html.Raw("<section>");
			}

				<div class="resources__slide resources__slide-padding">
<div class="resources__community-img">
							<img src='@item.ResourceDetails.ImageUrl' style="width:100%;height:407px;" />
  <div class="resources__community-label">
  <a href="@item.ResourceDetails.Category.ParentCategoryUrl">
  <span>@item.ResourceDetails.Category.ParentCategoryTitle</span></a>
              <a href="@item.ResourceDetails.Category.CategoryUrl">
               <span>@item.ResourceDetails.Category.CategoryTitle</span>
							</a>
    </div>
     <div class="resources__slide-time">
    <div class="resources--time">&nbsp;</div>
       @item.ResourceDetails.DurationStr
    </div>
</div>
                    <div class="resources__slide-info">
                        <div class="resources__slide-box">
							<p class="resources__slide-article"> @item.ResourceDetails.ResourceType</p>
							<a href='@item.ResourceUrl'>
							<h6 class="resources__slide-title">@item.ResourceDetails.ResourceTitle</h6>
							</a>
							<p class="resources__slide-desc">@Html.Raw(item.ResourceDetails.ResourceSummary)</p>
					    </div>
					    <div class="resources__slide-footer">
							<div class="resources__slide-btn" id="@string.Format("{0}_{1}", "addToMyHandBook" , item.Id.ToString())">
									<div id="addToMyHandBook">
										@if (item.AddToMyHandBook == true)
										{
											<span>Added to MyHandBook</span>
										}
										else
										{
											<button type="button" class="addToMyHandBook resources__slide-btn" data-id="@item.Id.ToString()"><span class="resources--plus anticon anticon-plus"></span> Add to MyHandBook </button>
										}
									</div>
								</div>
                        <div class="resources__slide-social">
							<a href="@item.ResourceUrl" class="resources__slide-btn resources__slide-btn-comment"><span class="resources--comments"></span>@item.CommentsAmount Comments</a>

							<button type="button" class="addLike resources__slide-btn resources--like anticon anticon-like-o" data-id="@item.Id.ToString()">
							 <div id="@string.Format("{0}_{1}", "resourceLikes" , item.Id.ToString())">
                                <span>@item.Likes.Likes</span>
                             </div>
                             </button>


							<button type="button" class="addDislike resources__slide-btn resources--dislike  anticon anticon-dislike-o" data-id="@item.Id.ToString()">
							<div id="@string.Format("{0}_{1}", "resourceDislikes" , item.Id.ToString())">
                                <span>@item.Likes.Dislikes</span>
                            </div>
                            </button>

                        </div>
                        </div>
                    </div>
				</div>

			if (columnCounter == 1)
			{
				columnCounter = 0;
				@Html.Raw("</section>")
			}
			else
			{
				columnCounter++;
			}
		}
		@{
			if (columnCounter != 0)
			{
				@Html.Raw("</section>")
			}
		}
</div>
</div>
</div>

<script type="text/javascript">

	$(document).ready(function () {

		//Add Like
		$('.addLike').on('click', function () {

			var resourceId = $(this).attr('data-id');

			$.ajax({
				type: 'POST',
				cache: false,
				url: '@Url.Action("AddLike", "IAFCHBResourcesPerCategory")',
				data: { resourceId: resourceId },
				dataType: "json",
				success: function (response) {
					$("#resourceLikes_" + resourceId).html(response);
				}
			});
		});

		//Add Dislike
		$('.addDislike').on('click', function () {

			var resourceId = $(this).attr('data-id');

			$.ajax({
				type: 'POST',
				cache: false,
				url: '@Url.Action("AddDislike", "IAFCHBResourcesPerCategory")',
				data: { resourceId: resourceId },
				dataType: "json",
				success: function (response) {
					$("#resourceDislikes_" + resourceId).html(response);
				}
			});
		});

		//Add ToMyHandBook
		$('.addToMyHandBook').on('click', function () {

			var resourceId = $(this).attr('data-id');
			var tag_id = "#addToMyHandBook_" + resourceId;
			
			$.ajax({
				type: 'POST',
				cache: false,
				url: '@Url.Action("AddToMyHandBook", "IAFCHBResourcesPerCategory")',
				data: { resourceId: resourceId },
				dataType: "json",
				success: function (response) {										
					if (response == true) {						
						$(tag_id).html("<span class='resources--plus anticon anticon-check'></span>Added to MyHandBook");
					}					
				}
			});
		});
	});


</script>
